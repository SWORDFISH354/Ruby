appMainModule.controller("EmployeeDetailsViewModel",function(n,t,i,r,u){r.modelIsValid=!0;r.modelErrors=[];n.viewModelHelper=r;n.employeeDetailsModel=new GulfRuby.EmployeeDetailsModel;var f=[],e=function(){f.push(new u.PropertyRule("UserName",{required:{message:"UserName is required"}}));f.push(new u.PropertyRule("Name",{required:{message:"Name is required"}}));f.push(new u.PropertyRule("Position",{required:{message:"Position is required"}}))};n.setupEmployeeDetails=function(){n.EmployeeId>0&&r.apiGet("api/hr/getemployeeById/"+n.EmployeeId,null,function(t){n.employeeDetailsModel=t.data})};n.setupDatesOnSubmit=function(){n.employeeDetailsModel.PassportExpiry=n.employeeDetailsModel.PassportExpiry!==null&&n.employeeDetailsModel.PassportExpiry!==""?moment(n.employeeDetailsModel.PassportExpiry).format("DD/MM/YYYY").toString():"";n.employeeDetailsModel.EmiratesIDExpiry=n.employeeDetailsModel.EmiratesIDExpiry!==null&&n.employeeDetailsModel.EmiratesIDExpiry!==""?moment(n.employeeDetailsModel.EmiratesIDExpiry).format("DD/MM/YYYY").toString():"";n.employeeDetailsModel.VisaExpiry=n.employeeDetailsModel.VisaExpiry!==null&&n.employeeDetailsModel.VisaExpiry!==""?moment(n.employeeDetailsModel.VisaExpiry).format("DD/MM/YYYY").toString():"";n.employeeDetailsModel.InsuranceExpiry=n.employeeDetailsModel.InsuranceExpiry!=null&&n.employeeDetailsModel.InsuranceExpiry!==""?moment(n.employeeDetailsModel.InsuranceExpiry).format("DD/MM/YYYY").toString():"";n.employeeDetailsModel.JoiningDate=n.employeeDetailsModel.JoiningDate!=null&&n.employeeDetailsModel.JoiningDate!==""?moment(n.employeeDetailsModel.JoiningDate).format("DD/MM/YYYY").toString():""};n.submit=function(){n.setupDatesOnSubmit();u.ValidateModel(n.employeeDetailsModel,f);r.modelIsValid=n.employeeDetailsModel.isValid;r.modelErrors=n.employeeDetailsModel.errors;r.modelIsValid?r.apiPost("api/hr/addemployee",n.employeeDetailsModel,function(){n.viewMode="success";window.location.href=window.GulfRuby.rootPath+"hr/employees/"}):r.modelErrors=n.employeeDetailsModel.errors};n.openPassportExpiry=function(t){t.preventDefault();t.stopPropagation();n.openedPassportExpiry=!0};n.openEmiratesExpiry=function(t){t.preventDefault();t.stopPropagation();n.openedEmiratesExpiry=!0};n.openVisaExpiry=function(t){t.preventDefault();t.stopPropagation();n.openedVisaExpiry=!0};n.openInsuranceExpiry=function(t){t.preventDefault();t.stopPropagation();n.openedInsuranceExpiry=!0};n.openJoiningDate=function(t){t.preventDefault();t.stopPropagation();n.openedJoiningDate=!0};e()});
//# sourceMappingURL=EmployeeDetailsViewModel.min.js.map
